# Obsidian 访问计数插件 - 用户指南

## 1. 插件简介

### 1.1 功能概述

Obsidian 访问计数插件是一个智能的文件访问统计工具，能够自动跟踪你对笔记文件的访问频率。每当你打开一个笔记文件时，插件会在该文件的 frontmatter 中自动增加访问计数，帮助你了解哪些笔记最常被查看。

### 1.2 主要特性

- **自动计数**：无需手动操作，自动跟踪文件访问
- **智能防重复**：避免短时间内重复计数
- **灵活配置**：支持自定义计数标签名称和作用范围
- **目录控制**：可以指定跟踪特定目录及其子目录
- **性能优化**：批量处理更新，不影响 Obsidian 使用体验
- **完全可控**：随时启用/禁用，完全掌控数据收集

### 1.3 使用场景

- **知识管理**：了解哪些笔记最重要，经常被查看
- **学习追踪**：跟踪学习材料的使用频率
- **内容优化**：基于访问数据优化笔记结构
- **工作效率**：识别工作中最常用的文档
- **个人分析**：了解自己的阅读和学习习惯

## 2. 安装和启用

### 2.1 通过社区插件安装

1. 打开 Obsidian 设置（Settings）
2. 点击左侧的"社区插件"（Community plugins）
3. 确保"安全模式"已关闭
4. 点击"浏览"（Browse）按钮
5. 搜索"Access Counter"
6. 点击"安装"（Install）
7. 安装完成后点击"启用"（Enable）

### 2.2 手动安装

1. 从 GitHub Releases 下载最新版本
2. 解压到 `<vault>/.obsidian/plugins/obsidian-access-counter/` 目录
3. 重启 Obsidian
4. 在设置中启用该插件

### 2.3 验证安装

安装成功后，你应该能在以下位置看到插件：

1. **设置 > 社区插件**：插件列表中显示"Access Counter"
2. **设置 > Access Counter**：出现插件专属设置页面
3. **状态栏**：显示访问计数状态（可选）

## 3. 基本使用

### 3.1 首次使用

1. **启用插件**：在社区插件列表中启用 Access Counter
2. **基础配置**：访问设置页面进行基本配置
3. **测试功能**：打开一个笔记文件，检查是否出现访问计数

### 3.2 查看访问计数

访问计数会自动添加到文件的 frontmatter 中：

```yaml
---
title: 我的笔记
access_count: 5
---

# 我的笔记内容

这是笔记的正文内容...
```

### 3.3 理解计数逻辑

- **触发条件**：打开文件时触发计数
- **防重复机制**：默认在 5 秒内重复打开同一文件不会重复计数
- **作用范围**：只对配置范围内的文件进行计数
- **数据存储**：计数数据存储在文件的 frontmatter 中

## 4. 详细配置

### 4.1 访问插件设置

1. 打开 Obsidian 设置（Settings）
2. 在左侧面板找到"Access Counter"
3. 点击进入插件设置页面

### 4.2 基本设置

#### 计数器标签名称
```
默认值：access_count
可选值：任意有效的 YAML 键名
示例：visit_count, read_times, access_frequency
```

**配置说明**：
- 这个名称将作为 frontmatter 中的键名
- 建议使用英文和下划线
- 避免与现有 frontmatter 字段冲突

#### 启用/禁用插件
```
默认值：启用
说明：控制插件是否工作
```

**使用建议**：
- 临时不需要计数时可以禁用
- 禁用期间不会处理任何文件访问
- 重新启用后继续从原有计数开始

### 4.3 作用范围设置

#### 包含目录
```
默认值：空（跟踪所有文件）
格式：目录路径，每行一个
示例：
Notes/
Projects/Active/
Learning/
```

**配置说明**：
- 空白表示跟踪所有文件
- 可以添加多个目录
- 支持相对路径和绝对路径
- 目录路径以 `/` 结尾

#### 排除目录
```
默认值：空
格式：目录路径，每行一个
示例：
Templates/
Archive/
Private/
.trash/
```

**配置说明**：
- 即使在包含目录中，排除目录也会被忽略
- 排除优先级高于包含
- 常用于排除模板、归档等不需要计数的目录

#### 递归子目录
```
默认值：启用
说明：是否跟踪指定目录的子目录
```

**使用场景**：
- 启用：跟踪 `Notes/` 及其所有子目录
- 禁用：只跟踪 `Notes/` 目录本身

### 4.4 高级设置

#### 最小间隔时间
```
默认值：5000（5秒）
单位：毫秒
范围：1000-60000
```

**作用**：防止短时间内重复计数
**调整建议**：
- 快速浏览用户：可以减少到 2-3 秒
- 深度阅读用户：可以增加到 10-15 秒

#### 批处理大小
```
默认值：10
范围：1-100
说明：一次批处理的最大操作数量
```

**性能影响**：
- 更大的批处理大小：更好的性能，但延迟更高
- 更小的批处理大小：更快的响应，但可能影响性能

#### 自动刷新间隔
```
默认值：2000（2秒）
单位：毫秒
范围：500-10000
```

**说明**：批处理操作的自动执行间隔

### 4.5 调试设置

#### 调试模式
```
默认值：禁用
说明：启用详细的调试日志
```

**使用场景**：
- 插件不正常工作时启用
- 查看详细的操作日志
- 性能分析和问题诊断

## 5. 实际使用示例

### 5.1 学术研究场景

**配置**：
```
计数器标签：access_count
包含目录：
  Research/
  Papers/
  Notes/Academic/
排除目录：
  Research/Archive/
递归子目录：启用
最小间隔：3000ms
```

**使用效果**：
- 跟踪研究笔记的访问频率
- 识别重要的研究资料
- 排除已归档的过期研究

### 5.2 个人知识管理

**配置**：
```
计数器标签：read_times
包含目录：
  Knowledge/
  Learning/
排除目录：
  Knowledge/Templates/
  Learning/Drafts/
递归子目录：启用
最小间隔：5000ms
```

**使用效果**：
- 了解知识点的复习频率
- 识别需要加强的学习内容
- 排除模板和草稿文件

### 5.3 工作项目管理

**配置**：
```
计数器标签：visit_count
包含目录：
  Projects/Current/
  Meetings/
排除目录：
  Projects/Current/Archive/
递归子目录：启用
最小间隔：2000ms
```

**使用效果**：
- 跟踪项目文档使用频率
- 识别重要的项目资料
- 了解会议记录的查看情况

## 6. 高级用法

### 6.1 多重计数策略

可以为不同类型的内容设置不同的计数标签：

```yaml
---
title: 重要文档
access_count: 15        # 总访问次数
daily_access: 3         # 今日访问次数
weekly_access: 8        # 本周访问次数
---
```

**实现方法**：
1. 创建多个插件实例（如果插件支持）
2. 使用不同的配置文件
3. 手动管理多个计数字段

### 6.2 数据分析和可视化

#### 导出访问数据
```javascript
// 使用 Dataview 插件查询访问数据
```dataview
TABLE access_count as "访问次数", file.mtime as "最后修改"
FROM ""
WHERE access_count > 0
SORT access_count DESC
LIMIT 20
```

#### 创建访问热力图
```javascript
// 结合其他插件创建可视化图表
```dataview
LIST
FROM ""
WHERE access_count > 10
SORT access_count DESC
```

### 6.3 自动化工作流

#### 结合 Templater 插件
```javascript
// 模板中自动初始化访问计数
<%
if (!tp.frontmatter.access_count) {
    await tp.file.include("[[Access Counter Template]]");
}
%>
```

#### 结合 Periodic Notes
```yaml
---
title: <% tp.date.now("YYYY-MM-DD") %>
access_count: 0
type: daily-note
---
```

## 7. 故障排除

### 7.1 常见问题

#### 问题：计数不会增加
**可能原因**：
1. 插件未启用
2. 文件不在跟踪范围内
3. 文件访问间隔太短
4. Frontmatter 格式错误

**解决方法**：
1. 检查插件状态
2. 确认目录配置
3. 调整最小间隔时间
4. 修复 frontmatter 格式

#### 问题：计数增加太快
**可能原因**：
1. 最小间隔时间设置过短
2. 其他插件或工作流触发文件访问

**解决方法**：
1. 增加最小间隔时间
2. 检查其他插件的行为
3. 使用排除目录过滤不需要的文件

#### 问题：性能影响
**可能原因**：
1. 批处理设置不当
2. 跟踪文件数量过多
3. 调试模式启用

**解决方法**：
1. 调整批处理参数
2. 缩小跟踪范围
3. 关闭调试模式

### 7.2 调试步骤

#### 启用调试模式
1. 进入插件设置
2. 启用"调试模式"
3. 打开开发者控制台（Ctrl+Shift+I 或 Cmd+Opt+I）
4. 查看控制台输出

#### 检查配置
```javascript
// 在控制台中检查当前配置
console.log(app.plugins.plugins['obsidian-access-counter'].settings);
```

#### 手动触发计数
```javascript
// 在控制台中手动触发文件计数
const plugin = app.plugins.plugins['obsidian-access-counter'];
const file = app.workspace.getActiveFile();
plugin.tracker.onFileAccess(file);
```

### 7.3 重置和恢复

#### 重置插件设置
1. 进入插件设置
2. 点击"重置为默认设置"
3. 确认重置操作

#### 手动清理数据
```yaml
---
title: 我的笔记
# 删除这一行来清除计数
# access_count: 15
---
```

#### 批量清理计数
使用正则表达式搜索替换：
```
搜索：^access_count: \d+$
替换：（空白）
```

## 8. 最佳实践

### 8.1 配置建议

#### 新用户配置
```
计数器标签：access_count
包含目录：（空，跟踪所有文件）
排除目录：Templates/, Archive/
最小间隔：5000ms
递归子目录：启用
```

#### 高级用户配置
```
计数器标签：自定义名称
包含目录：精确指定需要跟踪的目录
排除目录：详细的排除规则
最小间隔：根据使用习惯调整
批处理大小：根据性能需求调整
```

### 8.2 使用技巧

#### 定期分析访问数据
- 每周查看访问次数最高的文件
- 识别被忽视但重要的内容
- 调整笔记结构和组织方式

#### 结合其他插件
- 使用 Dataview 创建访问统计视图
- 结合 Templater 自动化工作流
- 配合 Periodic Notes 跟踪时间模式

#### 保持数据清洁
- 定期清理测试文件的计数
- 移除不再需要的访问记录
- 维护一致的命名规范

### 8.3 隐私和安全

#### 数据隐私
- 所有数据存储在本地 vault 中
- 插件不会向外部发送任何数据
- 访问记录完全在你的控制之下

#### 数据备份
- 访问计数是 frontmatter 的一部分
- 随文件一起备份
- 可以通过版本控制系统管理

#### 数据迁移
- 更换设备时数据随 vault 迁移
- 支持标准的 Obsidian 同步方式
- 可以选择性保留或清除访问数据

## 9. 支持和反馈

### 9.1 获取帮助

- **GitHub Issues**：https://github.com/your-username/obsidian-access-counter/issues
- **社区论坛**：Obsidian Community Forum
- **文档**：本用户指南和技术文档

### 9.2 报告问题

报告问题时请提供：
1. Obsidian 版本号
2. 插件版本号
3. 详细的问题描述
4. 重现步骤
5. 相关的错误信息或截图

### 9.3 功能请求

欢迎提出新功能建议：
1. 在 GitHub 创建 Feature Request
2. 详细描述功能需求
3. 说明使用场景和预期效果
4. 参与社区讨论

### 9.4 贡献代码

如果你想贡献代码：
1. Fork 项目仓库
2. 创建功能分支
3. 编写代码和测试
4. 提交 Pull Request
5. 参与代码审查

这个用户指南为最终用户提供了完整的使用说明，包括安装、配置、使用和故障排除等各个方面。